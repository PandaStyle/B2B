<!doctype html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boston To Budapest</title>
  <!-- Disable tap highlight on IE -->
  <meta name="msapplication-tap-highlight" content="no">
  <!-- Web Application Manifest -->
  <link rel="manifest" href="manifest.json">
  <!-- Color the status bar on mobile devices -->
  <meta name="theme-color" content="#000">
  <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
  <!--
    <link rel="canonical" href="http://www.example.com/">
    -->
  <link rel="stylesheet" href="styles/main.css">
  <link href="https://fonts.googleapis.com/css?family=Frank+Ruhl+Libre:300,400,500,700,900" rel="stylesheet">
  <link rel="stylesheet" href="photoswipe/photoswipe.css">
  <link rel="stylesheet" href="photoswipe/default-skin/default-skin.css">
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script>
  <script src="photoswipe/photoswipe.js"></script>
  <script src="photoswipe/photoswipe-ui-default.js"></script>
  <script src="scripts/500px.js" type="text/javascript"></script>
  <script type="text/javascript">
    WebFont.load({
      google: {
        families: ["PT Sans:400,400italic,700,700italic", "Unna:regular", "Vidaloka:regular", "Cantata One:regular",
          "Poppins:regular,500,600,700", ""
        ]
      }
    });

  </script>
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png" rel="apple-touch-icon">
</head>

<body>
  <div class="mobile-nav w-hidden-main w-hidden-medium w-hidden-small w-hidden-tiny"><img class="mobile-nav-logo" src="images/untitled-1.png">
    <div class="numbers-ph">
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">1</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">2</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">3</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">4</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">5</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">6</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">7</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">8</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">9</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">10</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">11</h3>
      </div>
      <div class="mobile-nav-number">
        <h3 class="mobile-nav-h3">12</h3>
      </div>
    </div>
  </div>
  <div class="main w-row">
    <div class="project-detail">
      <div class="country-icon"></div>
      <div class="country-name">United States of America</div>
      <div class="tabs">
      </div>
      <div class="content">
        <h2 class="city-name"></h2>
          <h4 class="date"></h4>
          <div class="fav-list">
          </div>
      </div>
    </div>
    <div class="left-column w-col w-col-6">
      <div class="boston left">
        <h2 class="letter">00.</h2>
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Boston</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">... / 02.01</h4>
            </div>
          </div>
        </div>
      </div>
      <div class="cali left">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">California</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">02.01 / 02.08</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">01.</h2>
      </div>
      <div class="hawaii left">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Hawaii</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">02.08 / 02.17</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">02.</h2>
      </div>
      <div class="fiji left">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Fiji</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">02.17 / 02.27</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">03.</h2>
      </div>
      <div class="left nz">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">New Zealand</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">02.27 / 03.08</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">04.</h2>
      </div>
      <div class="aus left">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Australia</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">03.08 / 03.21</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">05.</h2>
      </div>
      <div class="bali left">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Bali</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">03.21 / 03.29</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">06.</h2>
      </div>
      <div class="left singapore">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Singapore</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">03.29 / 04.05</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">07.</h2>
      </div>
      <div class="left thailand">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Thailand</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">04.05 / 04.25</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">08.</h2>
      </div>
      <div class="left phil">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Philippines</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">04.25 / 05.04</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">09.</h2>
      </div>
      <div class="left shanghai">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Shanghai</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">05.04 / 05.10</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">10.</h2>
      </div>
      <div class="japan left">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Japan</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">05.10 / 05.31</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">11.</h2>
      </div>
      <div class="budapest left">
        <div class="places">
          <div class="place">
            <div class="place-title">
              <h2 class="place-h2">Budapest</h2>
            </div>
            <div class="horiz-line"></div>
            <div class="place-date">
              <h4 class="place-h4">06.01 / ...</h4>
            </div>
          </div>
        </div>
        <h2 class="letter">12.</h2>
      </div>
    </div>
    <div class="right w-col w-col-6 w-hidden-small w-hidden-tiny">
      <div class="menu">
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">00</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3 class="item-h3" data-country="Boston">Boston</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">01</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3 class="item-h3" data-country="California">California</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">02</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3 class="item-h3" data-country="Hawaii">Hawaii</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">03</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3 class="item-h3" data-country="Boston">Fiji</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">04</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3 class="item-h3" data-country="NewZealand">New Zealand</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">05</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3>Australia</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">06</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3>Bali</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">07</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3>Singapore</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">08</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3>Thailand</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">09</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3>Philippines</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">10</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3>Shanghai</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">11</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3>Japan</h3>
          </div>
        </div>
        <div class="item w-clearfix">
          <div class="number">
            <h3 class="num">12</h3>
          </div>
          <div class="arrow"></div>
          <div class="title">
            <h3>Budapest</h3>
          </div>
        </div>
      </div>
      <div class="menu-line w-hidden-small w-hidden-tiny"><img class="logo" src="images/untitled-1.png" width="50">
      </div>
    </div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
      <!-- Background of PhotoSwipe. 
          It's a separate element as animating opacity is faster than rgba(). -->
      <div class="pswp__bg"></div>
      <!-- Slides wrapper with overflow:hidden. -->
      <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
              PhotoSwipe keeps only 3 of them in the DOM to save memory.
              Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
          <div class="pswp__item"></div>
          <div class="pswp__item"></div>
          <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
          <div class="pswp__top-bar">
            <!--  Controls are self-explanatory. Order can be changed. -->
            <div class="pswp__counter"></div>
            <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
            <button class="pswp__button pswp__button--share" title="Share"></button>
            <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
            <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
            <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
            <!-- element will get class pswp__preloader--active when preloader is running -->
            <div class="pswp__preloader">
              <div class="pswp__preloader__icn">
                <div class="pswp__preloader__cut">
                  <div class="pswp__preloader__donut"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
            <div class="pswp__share-tooltip"></div>
          </div>
          <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
              </button>
          <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
              </button>
          <div class="pswp__caption">
            <div class="pswp__caption__center"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    const days = {
      "Boston": {
        countryName: "United States of America",
        days: {
          '0': {
            city: "Boston, Massachussets",
            date: "until February 1"
          }
        }
      },
      "California": {
        countryName: "United States of America",
        days: {
          '1': {
            city: "Los Angeles",
            date: "February 1"
          },
          '2': {
            city: "Los Angeles",
            date: "February 2"
          },
          '3': {
            city: "Los Angeles",
            date: "February 3"
          },
          '4': {
            city: "",
            date: "February 4"
          },
          '5': {
            city: "",
            date: "February 5"
          },
          '6': {
            city: "",
            date: "February 6"
          },
          '7': {
            city: "",
            date: "February 7"
          },
          '8': {
            city: "",
            date: "February 8"
          },
        }
      },
      "Hawaii": {
        countryName: "United States of America",
        days: {
          '9': {
            city: "",
            date: "February 9"
          },
          '10': {
            city: "",
            date: "February 10"
          },
          '11': {
            city: "",
            date: "February 11"
          },
          '12': {
            city: "",
            date: "February 12"
          },
          '13': {
            city: "",
            date: "February 13"
          },
          '14': {
            city: "",
            date: "February 14"
          },
          '15': {
            city: "",
            date: "February 15"
          },
          '16': {
            city: "",
            date: "February 16"
          },
          '17': {
            city: "",
            date: "February 17"
          }
        }
      }
    }

  

    _500px.init({
      sdk_key: '43d33051eedd5ff49abe53986f0c1bcd8f5a8c13',
      oauth_token: '1qpcJQZmJOaLHnGcCXcx0mHjwl4hnalLaOMKKjpU'
    });
    _500px.api('/users/20937157/galleries', {
      privacy: 'both'
    }, (resp) => {
      console.log("galleries", resp);
      let a = _.find(resp.data.galleries, {
        name: "day 0"
      })
      console.log(a);
    });

    var
      items = $(".item"),
      place = $(".place-title"),
      projectDetail = $('.project-detail'),
      left = $('.left'),
      right = $('.right'),
      letter = $('.letter'),
      place = $('.place');


    var lastAnim = null;

    items.each(function (index, element) {
      if (left[index] && place[index]) {
        var tw1 = TweenLite.to(left[index], 0.2, {
          opacity: 1,
          paused: index == 0 ? false : true
        })
        //  var tw2 = new TweenLite.from(place[index], 0.2, {autoAlpha: 0, x: -100, paused: index == 0 ? false: true})
        element.animation = tw1;
      }
    })

    function over() {
      if (lastAnim)
        lastAnim.reverse();

      this.animation.play();
      lastAnim = this.animation;
    }

    let enterProjectAnim = new TimelineLite().pause();

    enterProjectAnim.to([place, letter, right], 0.5, {
      autoAlpha: 0,
      ease: Power3.easeOut
    })
    enterProjectAnim.to(left, 0.5, {
      width: '100vw',
      ease: Power3.easeOut
    })
    enterProjectAnim.to(projectDetail, 0.5, {
      autoAlpha: 1,
      ease: Power3.easeOut
    })

    let displayDay = dayNumber => {

      $('.fav-list').empty();

      _500px.api('/users/20937157/galleries', {
        privacy: 'both'
      }, (resp) => {
        console.log("galleries", resp);
        let galleryId = _.find(resp.data.galleries, {
          name: "day " + dayNumber
        }).id;

        // When the user logs in we will pull their favorite photos
        _500px.api('/users/20937157/galleries/' + galleryId + '/items', {
          page: 1,
          image_size: 1600,

        }, function (response) {
          let galleryItems = [];
          response.data.photos.forEach((img, index) => {
            let temp = $('<div  ng-repeat="img in imgs" style="flex-grow:' + img.width * 100 / img.height +
              '; flex-basis:' + img.width * 200 / img.height +
              'px;">\
                        <i style="padding-bottom:' + img.height /
              img.width * 100 + '%"></i>\
                        <img data-index="' + index +
              '" src="' +
              img.image_url +
              '" />');

            $('.fav-list').append(temp);

            let item = {
              src: img.image_url,
              w: img.width,
              h: img.height
            }
            galleryItems.push(item)

            let pswpElement = document.querySelectorAll('.pswp')[0];

            temp.click((e) => {
              var options = {
                history: false,
                focus: false,
                showHideOpacity: true,
                showAnimationDuration: 500,
                hideAnimationDuration: 500,
                escKey: true,
                zoomEl: false,
                shareEl: false,
                preloaderEl: true,
                tapToToggleControls: true,
                index: parseInt($(e.target).attr('data-index'), 10)
              };
              console.log(galleryItems)
              var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, galleryItems, options);
              gallery.init()

            })
          })

          for (let i = 0; i < 5; i++) {
            $('.fav-list').append($('<div class="placeholder"></div>'));
          }

        });
      });
    }





    let displayProject = (country) => {
      $('.country-name').text(country.countryName)

      for (let [key, value] of Object.entries(country.days)) {
        $('.tabs').append($('<div/>')
            .attr('data-city', value.city)
            .attr('data-date', value.date)
            .attr('data-day', key)
            .text('Day ' + key))
      }
      $('.tabs > div').click(selectDay)

      $('.tabs > div').first().click();
    }

    let selectDay = (e) => {    
      $(e.target).siblings().removeClass('selected').end().attr('class', 'selected')
      $('.content .city-name').text($(e.target).attr('data-city')) 
      $('.content .date').text($(e.target).attr('data-date')) 
      displayDay($(e.target).attr('data-day'))
    }


    let projectClickHandler = e => {
      let country = $(e.target).is('h3') ? $(e.target).attr('data-country') : $(e.target).find('h3.item-h3').attr('data-country');
      let countryObj = days[country]
      enterProjectAnim.play()
      console.log(countryObj)
      displayProject(countryObj);

    }

    items.hover(over);
    items.click(projectClickHandler)


  </script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <!-- build:js scripts/main.min.js -->
  <script src="scripts/main.js"></script>
  <!-- endbuild -->
  <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-89564926-1', 'auto');
    ga('send', 'pageview');

  </script>
  <!-- Built with love using Web Starter Kit -->
</body>

</html>
